---
title       : Importing data with readr
description : This chapter covers all the useful `readr` functions that reads in data.

--- type:NormalExercise lang:r xp:100 skills:1 key:086558b449
## Reading a .csv file

Welcome to this mini-course on the `readr` package!  Over the next two chapters, you’ll be exposed to many of the great features this chapter has to offer.

Let’s get started right away with some basic importing features.  Your first task will be to master the use of the `read_csv()` function.  There are many arguments available, but the only required argument is `file`, a path to a CSV file on the disk.

You’ll be practicing your importing skills on a dataset containing weights of chickens and their feed type.

*** =instructions
- Load the `readr` package.
- Use the `read_csv()` function to import `chickwts.csv`.  Call the resulting data frame `cwts`.
- View the `head()` of `cwts`.

*** =hint
Your call to `read_csv()` should take one argument: the name of the CSV file, in quotes.

*** =pre_exercise_code
```{r}
## TODO: insert link from teach app
```

*** =sample_code
```{r}
# Load readr
library(readr)

# Import chickwts.csv: cwts
cwts <- read_csv("chickwts.csv")

# View the head of cwts
head(cwts)
```

*** =solution
```{r}
# Load readr
library(readr)

# Import chickwts.csv: cwts
cwts <- read_csv("chickwts.csv")

# View the head of cwts
head(cwts)
```

*** =sct
```{r}
test_library_function("readr")
test_function("read_csv")
test_output_contains("head(cwts)")
test_error()
success_msg("Great work!")
```

--- type:NormalExercise lang:r xp:100 skills:1 key:5c4acd4138
## Reading a .tsv file

If your file happens to be tab-delimited, `readr` offers a function specifically for that purpose.  `read_tsv()` uses a TSV file to produce a data frame in R.

`read_tsv()` behaves almost identically to `read_csv()`.  There are many optional arguments and one required argument, `file`.

In this exercise, you’ll import a set of data on professors’ salaries called `Salaries.tsv`.  This time, we’ll also explore a couple of optional arguments.

*** =instructions
- Load the `readr` package.
- Use the `read_tsv()` function to read in the `Salaries.tsv` file. Store the result in an object called `salaries`.
- View the `head()` of `salaries`.

*** =hint
Don't forget to specify the `file` argument to `read_tsv()` in quotes!

*** =pre_exercise_code
```{r}
library(readr)
# TODO: add AWS link to Salaries.tsv
```

*** =sample_code
```{r}
## readr is loaded

# Import data: salaries
salaries <- read_tsv("Salaries.tsv")

# View first six rows of salaries
head(salaries)
```

*** =solution
```{r}
# Load readr
library(readr)

# Import data: salaries
salaries <- read_tsv("Salaries.tsv")

# View first six rows of salaries
head(salaries)
```

*** =sct
```{r}
test_library_function("readr")
test_function("read_tsv", not_called_msg = "Don't forget to call `read_tsv()` to import your data.", incorrect_msg = "Did you call the `read_tsv()` function to import your data? The name of the file is `Salaries.tsv`.")
test_function("head", incorrect_msg = "Did you print the first six rows of `salaries` using `head()`?")
test_error()
success_msg("Great work!")
```

--- type:NormalExercise lang:r xp:100 skills:1 key:26f83a8842
## Reading a European .csv

In most of Europe, commas (rather than periods) are used as decimal points.  This creates an issue for comma-separated value files: since commas can no longer be used to separate values, semicolons are used instead.

For this reason, `readr` provides `read_csv2()` which looks for `;` to indicate column breaks and `,` to indicate decimal points.  Other than that, it behaves just like `read_csv()`.

In this exercise, you'll see what happens when you incorrectly use `read_csv()` on datasets that contains values separated by semicolons. You'll import a dataset that contains information on the girth, height, and volume for Black Cherry Trees.

*** =instructions
The `readr` package and the `trees.csv` file are already loaded in your workspace.

- Correctly import `trees.csv` with the `read_csv2()` function and store the result as `trees`.
- View the dimensions of `trees` using the `dim()` function and print the first six rows of `trees` to the console.
- Now incorrectly import the data with `read_csv()` and store the result as `trees_wrong`.
- View the dimensions of `trees_wrong` using the `dim()` function and print the first six rows of `trees_wrong` to the console.

*** =hint
The `read_csv()` and `read_csv2()` functions have the same syntax. Specify the `file` argument to both calls and make sure they're in quotes!

*** =pre_exercise_code
```{r}
library(readr)
# Add trees.csv file to workspace here
```

*** =sample_code
```{r}
# Import data with read_csv2()
trees <- read_csv2("trees.csv")

# View dimensions and head: trees
dim(trees)
head(trees)

# Import data with read_csv()
trees_wrong <- read_csv("trees.csv")

# View dimensions and head: trees_wrong
dim(trees_wrong)
head(trees_wrong)
```

*** =solution
```{r}
# Import data with read_csv2()
trees <- read_csv2("trees.csv")

# View dimensions and head: trees
dim(trees)
head(trees)

# Import data with read_csv()
trees_wrong <- read_csv("trees.csv")

# View dimensions and head: trees_wrong
dim(trees_wrong)
head(trees_wrong)
```

*** =sct
```{r}
test_data_frame("trees", undefined_msg = "Don't forget to create `trees`!", incorrect_msg = "Did you import your data with `read_csv2()` to create `trees`?")
test_function("read_csv2", incorrect_msg = "Did you import your data with `read_csv2()` to create `trees`?", not_called_msg = "Don't forget to import your data with `read_csv2()` to create `trees`!")

test_output_contains("dim(trees)", incorrect_msg = "Did you print out the dimensions of `trees`?")
test_output_contains("head(trees)", incorrect_msg = "Did you print the `head()` of `trees` to the console?")

test_data_frame("trees_wrong", undefined_msg = "Don't forget to create `trees_wrong`!", incorrect_msg = "Did you import your data with `read_csv()` to create `trees_wrong`?")
test_function("read_csv", incorrect_msg = "Did you import your data with `read_csv()` to create `trees_wrong`?", not_called_msg = "Don't forget to import your data with `read_csv()` to create `trees_wrong`!")

test_output_contains("dim(trees_wrong)", incorrect_msg = "Did you print out the dimensions of `trees_wrong`?")
test_output_contains("head(trees_wrong)", incorrect_msg = "Did you print the `head()` of `trees_wrong` to the console?")

test_error()
success_msg("Excellent work! The `read_csv()` function combined the three columns into one called `Girth; Height; Volume` because it couldn't recognize how the values were separated. If you see something like this in the future, now you know how to fix it!")
```

--- type:NormalExercise lang:r xp:100 skills:1 key:a44d920a83
## Read a fixed-width file

Use `read_table()` to import a directory of some famous names.  Then use `read_fwf()` to make use of the `skip` and `na` arguments.

*** =instructions
- instruction 1
- instruction 2

*** =hint
hint comes here

*** =pre_exercise_code
```{r}
library(readr)
```

*** =sample_code
```{r}
# sample code
```

*** =solution
```{r}
# solution code
```

*** =sct
```{r}
success_msg("Great work!")
```

--- type:NormalExercise lang:r xp:100 skills:1 key:86feb802cd
## Reading a text file

Use read_file and read_lines to import tweets into R.

*** =instructions
- instruction 1
- instruction 2

*** =hint
hint comes here

*** =pre_exercise_code
```{r}
library(readr)
```

*** =sample_code
```{r}
# sample code
```

*** =solution
```{r}
# solution code
```

*** =sct
```{r}
success_msg("Great work!")
```

--- type:NormalExercise lang:r xp:100 skills:1 key:1475b4009c
## Writing .csv and .tsv files

After importing and working with a data set, you'll want to save it off to the disk to make sure that your hard work doesn't go to waste.  In this exercise, you'll learn how.

If you've used `write.csv()` in the base package, you may have noticed that by default, row numbers are inserted as the leftmost column.  Then when you import back into R, the row numbers show up as a column of data.

Not so with `write_csv()`, the equivalent function in the `readr` package.  No duplicate row numbers are added.  As with other functions you've seen, `write_csv()` has many optional arguments, but the required ones are `x` and `path`.

Take a look at the other arguments using `?read_csv`.  Notice especially that switching to `append` mode (add to the end of a pre-existing file) automatically disables the writing of column names, unless you manually override both.

*** =instructions
- Use `write_csv()` to save the `cwts` data set as `chickwts.csv`.
- Save the same data with the same name, but this time set the `append` argument to `TRUE`.

*** =hint
hint comes here

*** =pre_exercise_code
```{r}
library(readr)
```

*** =sample_code
```{r}
# sample code
```

*** =solution
```{r}
# solution code
```

*** =sct
```{r}
success_msg("Great work!")
```

--- type:NormalExercise lang:r xp:100 skills:1 key:79bb8b3329
## Writing .rds files

Use write_rds to preserve metadata about R objects.

*** =instructions
- instruction 1
- instruction 2

*** =hint
hint comes here

*** =pre_exercise_code
```{r}
library(readr)
```

*** =sample_code
```{r}
# sample code
```

*** =solution
```{r}
# solution code
```

*** =sct
```{r}
success_msg("Great work!")
```

